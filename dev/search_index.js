var documenterSearchIndex = {"docs":
[{"location":"reference/#Reference","page":"Reference","title":"Reference","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"@profview\nProfileSVG.view\nProfileSVG.save\nProfileSVG.set_default\nProfileSVG.init","category":"page"},{"location":"reference/#ProfileSVG.@profview","page":"Reference","title":"ProfileSVG.@profview","text":"@profview f(args...)\n\nClear the Profile buffer, profile f(args...), and view the result graphically.\n\n\n\n\n\n","category":"macro"},{"location":"reference/#ProfileSVG.view","page":"Reference","title":"ProfileSVG.view","text":"ProfileSVG.view([fcolor,] data=Profile.fetch(); kwargs...)\nProfileSVG.view([fcolor,] g::FlameGraph; kwargs...)\n\nView profiling results.\n\nkeywords for SVG style\n\nbgcolor (default: :fcolor)\nThe background style. One of :fcolor/:classic/:transparent.\nfontcolor (default: :fcolor)\nThe font color style. One of :fcolor/:classic/:currentcolor/:bw.\nframeopacity (default: 1)\nThe opacity of frames in [0, 1].\nyflip (default: false)\nIf true, the \"icicle\" graph will be rendered.\nmaxdepth (default: 50)\nThe maximum number of the rendered rows.\nmaxframes (default: 2000)\nThe maximum number of the rendered frames.\nwidth (default: 960)\nThe width of output SVG image in pixels.\nheight (default: 0)\nThe height of output SVG image in pixels. If you set the height to 0, it will be calculated automatically according to the graph.\nroundradius (default: 2)\nThe rounding radius of the corners of each frame in pixels.\nfont (default: \"inherit\")\nThe font family names for texts. This setting is used as the CSS font-family property, i.e. you can use a comma-separated list.\nfontsize (default: 12)\nThe font size of texts for function information, in pixels (not points).\nnotext (default: false)\nIf true, the texts overlaid on the frames will be hidden by the interactive feature.\ntimeunit (default: :none)\nIf :s, :ms, :us, or :Âµs is specified, the duration of the block will be displayed in the lower right corner in the specified unit.\ndelay (default: 0.0)\nThe delay between backtraces, in seconds. If a non-positive number is specified, the current setting in Profile.init() will be used.\n\nkeywords for flamegraph\n\nlidict\nC\ncombine\nrecur\npruned\nfilter\n\nSee FlameGraphs for details.\n\n\n\n\n\n","category":"function"},{"location":"reference/#ProfileSVG.save","page":"Reference","title":"ProfileSVG.save","text":"ProfileSVG.save([fcolor,] io::IO, data=Profile.fetch(); kwargs...)\nProfileSVG.save([fcolor,] io::IO, g::FlameGraph; kwargs...)\nProfileSVG.save([fcolor,] filename, data=Profile.fetch(); kwargs...)\nProfileSVG.save([fcolor,] filename, g::FlameGraph; kwargs...)\n\nSave profile results as an SVG file. See ProfileSVG.view for details of kwargs.\n\n\n\n\n\n","category":"function"},{"location":"reference/#ProfileSVG.set_default","page":"Reference","title":"ProfileSVG.set_default","text":"ProfileSVG.set_default([fcolor]; kwargs...)\n\nSet defult configurations of profiling results. See ProfileSVG.view for details of kwargs.\n\nExamples\n\nProfileSVG.set_default(width=600, fontsize=9)\n\n\n\n\n\n","category":"function"},{"location":"reference/#ProfileSVG.init","page":"Reference","title":"ProfileSVG.init","text":"ProfileSVG.init()\n\nInitialize the settings.\n\n\n\n\n\n","category":"function"},{"location":"other-options/#Other-Options","page":"Other Options","title":"Other Options","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view and ProfileSVG.save have optional keyword arguments for specifying the SVG styles.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"using Profile, ProfileSVG\nProfileSVG.init()\ninclude(joinpath(\"assets\", \"profile_test.jl\"))\nProfile.clear()\n@profile (x -> log(x) * exp(x)).(fill(1.23, 10, 10))\nProfileSVG.set_default(width=800)","category":"page"},{"location":"other-options/#yflip","page":"Other Options","title":"yflip","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The yflip option inverts the depth direction. It defaults to false and a \"flame\" graph with upward depth will be rendered. By setting yflip to true, a \"icicle\" graph with downward depth will be rendered.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(yflip=true)\nProfileSVG.view(g, yflip=true) # hide","category":"page"},{"location":"other-options/#maxdepth-and-maxframes","page":"Other Options","title":"maxdepth and maxframes","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The maxdepth option limits the maximum number of the rendered rows of graph. The frames deeper than maxdepth (i.e. away from the root) will be truncated.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The maxframes option limits the maximum number of the rendered frames. Since the frames are rendered in order of depth-first search, the frames to the right tend to be omitted.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"When maxdepth and/or maxframes are reached, warnings will be displayed.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(maxdepth=7, maxframes=12)\nProfileSVG.view(g, maxdepth=7, maxframes=12) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"warning: Warning\nThe graphs with many frames require a lot of memory and CPU resources, especially when using interactive features. Instead of raising the maxframes option, consider reducing the graph size using the filter option etc.","category":"page"},{"location":"other-options/#width-and-height","page":"Other Options","title":"width and height","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The width and height options specify the size of the SVG image in pixels. However, the actual display scale depends on the viewer.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"If you set the height to 0, it will be calculated automatically according to the graph. As shown below, cropping can occur when the height of the graph exceeds the manually specified height. When the interactive feature is available, you can display the cropped area by dragging the graph.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(width=400, height=200)\nProfileSVG.view(g, width=400, height=200) # hide","category":"page"},{"location":"other-options/#roundradius","page":"Other Options","title":"roundradius","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The raoundradius option specifies the rounding radius of the corners of each frame in pixels.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(roundradius=6)\nProfileSVG.view(g, roundradius=6) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"tip: Tip\nBy setting roundradius to 0, the size of the output SVG file can be reduced slightly.","category":"page"},{"location":"other-options/#font-and-fontsize","page":"Other Options","title":"font and fontsize","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The font option specifies the font family names for texts. This setting is used as the CSS font-family property, i.e. you can use a comma-separated list and quotes are required around the names which are not valid CSS identifiers.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The fontsize option specifies the font size in pixels.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"Note that the actual rendering results depend on the viewer.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(font=\"'Times New Roman', serif\", fontsize=16)\nProfileSVG.view(g, font=\"'Times New Roman', serif\", fontsize=16) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"tip: Tip\nBy setting font to \"system-ui\", \"ui-serif\", \"ui-sans-serif\", etc., the default user interface font may be used.","category":"page"},{"location":"other-options/#notext","page":"Other Options","title":"notext","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The notext option specifies the visibility of overlaid texts on the frames. If the notext is true, the texts will be hidden by the interactive feature and the rendering load is significantly reduced.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(notext=true)\nProfileSVG.view(g, notext=true) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"info: Info\nEven if you set notext to true, the text data themselves will be output, and the texts will be displayed in non-interactive mode, i.e. as a still image.","category":"page"},{"location":"other-options/#timeunit-and-delay","page":"Other Options","title":"timeunit and delay","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The timeunit option specifies the time unit for displaying the duration (span) of active block. One of the following symbols is available for timeunit:","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":":none (default)\ndisabling the duration display\n:s, :ms, :us, or :Âµs\nusing the physical time unit\nothers (e.g. :ticks)\nusing the discrete sampling count","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"The delay option specifies the delay between backtraces, in seconds. The value will be used for the conversion from the discrete sampling count to the physical time. If a non-positive number is specified, the current setting in the return value of Profile.init() will be used.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(timeunit=:ticks)\nProfileSVG.view(g, timeunit=:ticks) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"Profile.init(delay=1e-4)\nProfileSVG.view(timeunit=:ms)\nProfileSVG.view(g, timeunit=:ms) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.view(timeunit=:Âµs, delay=3e-4)\nProfileSVG.view(g, timeunit=:Âµs, delay=3e-4) # hide","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"info: Info\nThe physical time displayed is an approximate value, and does not generally match the measurement time by @time etc. The discrepancies may also occur if the profiling environment and the viewing environment are different.","category":"page"},{"location":"other-options/#Setting-options-as-default","page":"Other Options","title":"Setting options as default","text":"","category":"section"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"You can specify the default values for options with ProfileSVG.set_default.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"You can also reset the settings with ProfileSVG.init.","category":"page"},{"location":"other-options/","page":"Other Options","title":"Other Options","text":"ProfileSVG.set_default(StackFrameCategory(), roundradius=0, font=\"system-ui\", fontsize=8)\nProfileSVG.view(width=300)\nProfileSVG.view(g, width=300) # hide","category":"page"},{"location":"coloration-schemes/#Coloration-Schemes","page":"Coloration Schemes","title":"Coloration Schemes","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The output color of ProfileSVG can be customized with the functions provided by the FlameGraphs package. See the FlameGraphs docmentation for details.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"using Profile, ProfileSVG\nProfileSVG.init()\ninclude(joinpath(\"assets\", \"profile_test.jl\"))\nProfile.clear()\n@profile (x -> log(x) * exp(x)).(fill(1.23, 10, 10))\nProfileSVG.set_default(width=800)","category":"page"},{"location":"coloration-schemes/#Default-scheme","page":"Coloration Schemes","title":"Default scheme","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"ProfileSVG.view()\nnothing # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"or","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"using FlameGraphs\nProfileSVG.view(FlameColors())\nProfileSVG.view(FlameColors(), g) # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The default scheme uses cycling colors to distinguish different stack frames, while coloring runtime dispatch \"red\" and garbage-collection \"orange\". The run-time dispatch (aka, dynamic dispatch, run-time method lookup, or a virtual call) often has a significant impact on performance.","category":"page"},{"location":"coloration-schemes/#Stack-frame-category","page":"Coloration Schemes","title":"Stack frame category","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"You can colorize the stack frames based on their category, or module-of-origin.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"using FlameGraphs\nProfileSVG.view(StackFrameCategory())\nProfileSVG.view(StackFrameCategory(), g) # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"In the default StackFrameCategory scheme, \"gray\" indicates time spent in Core.Compiler (mostly inference), \"dark gray\" in other Core, \"yellow\" in LLVM, \"orange\" in other ccalls, \"light blue\" in Base, and \"red\" is uncategorized (mostly package code).","category":"page"},{"location":"coloration-schemes/#bgcolor-and-fontcolor-options","page":"Coloration Schemes","title":"bgcolor and fontcolor options","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"ProfileSVG.view and ProfileSVG.save have optional keyword arguments for specifying the SVG styles.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The bgcolor option specifies the background color style and the fontcolor option specifies the font color style.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"One of the following symbols is available for bgcolor:","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":":fcolor\nfcolor(:bg) (default)\n:classic\npale color gradation which comes from the original Flame Graphs\n:transparent\nfully transparent","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"One of the following symbols is available for fontcolor:","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":":fcolor\nfcolor(:font) (default)\n:classic\nblack\n:currentcolor\nthe currentcolor CSS keyword\n:bw\nblack or white depending on the frame color","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"info: Info\nYou cannot specify a Color or a color name directly to bgcolor or fontcolor. The colorbg and colorfont options of FlameGraphs.FlameColors and FlameGraphs.StackFrameCategory are available.","category":"page"},{"location":"coloration-schemes/#:fcolor-(default)","page":"Coloration Schemes","title":":fcolor (default)","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"using FlameGraphs, Colors\nfcolor = FlameColors(colorbg=colorant\"steelblue\", colorfont=colorant\"lightyellow\")\n\nProfileSVG.view(fcolor)\nProfileSVG.view(fcolor, g) # hide","category":"page"},{"location":"coloration-schemes/#:classic","page":"Coloration Schemes","title":":classic","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"ProfileSVG.view(bgcolor=:classic, fontcolor=:classic)\nProfileSVG.view(g, bgcolor=:classic, fontcolor=:classic) # hide","category":"page"},{"location":"coloration-schemes/#:transparent-and-:currentcolor","page":"Coloration Schemes","title":":transparent and :currentcolor","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"<div class=\"bg\">","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The contextual, i.e. parent, background here has a pattern, and the font color depends on the theme (light or dark).","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"ProfileSVG.view(bgcolor=:transparent, fontcolor=:currentcolor)\nProfileSVG.view(g, bgcolor=:transparent, fontcolor=:currentcolor) # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"</div>","category":"page"},{"location":"coloration-schemes/#:bw","page":"Coloration Schemes","title":":bw","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"modcat(mod) = nothing\nloccat(sf) = occursin(\"#\", string(sf.func)) ? colorant\"navy\" : colorant\"powderblue\"\n\nmysfc = StackFrameCategory(modcat, loccat, colorant\"dimgray\", colorant\"red\")\n\nProfileSVG.view(mysfc, fontcolor=:bw)\nProfileSVG.view(mysfc, g, fontcolor=:bw) # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"info: Info\nThe decision whether to use black or white is based on the assumption that the frames are opaque. If the frameopacity option is set to a low value, the texts may be hard to read.","category":"page"},{"location":"coloration-schemes/#frameopacity-option","page":"Coloration Schemes","title":"frameopacity option","text":"","category":"section"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The frameopacity option specifyies the opacity of frames in [0, 1]. This option affects only the background of the frame, not the texts or the viewport background.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"<div class=\"bg\">","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"The contextual background here has a pattern.","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"ProfileSVG.view(frameopacity=0.5, bgcolor=:transparent, fontcolor=:currentcolor)\nProfileSVG.view(g, frameopacity=0.5, bgcolor=:transparent, fontcolor=:currentcolor) # hide","category":"page"},{"location":"coloration-schemes/","page":"Coloration Schemes","title":"Coloration Schemes","text":"</div>","category":"page"},{"location":"#ProfileSVG","page":"Introduction","title":"ProfileSVG","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"ProfileSVG allows you to export profiling data as an SVG file. It can be used to display profiling results in Jupyter/IJulia notebooks, Pluto or any other SVG viewer.","category":"page"},{"location":"#Installation","page":"Introduction","title":"Installation","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The package can be installed with the Julia package manager. Run:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"import Pkg\nPkg.add(\"ProfileSVG\")","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"or, from the Julia REPL, type ] to enter the Pkg REPL mode and run:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"pkg> add ProfileSVG","category":"page"},{"location":"#Usage","page":"Introduction","title":"Usage","text":"","category":"section"},{"location":"#Displaying-profiles","page":"Introduction","title":"Displaying profiles","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"using ProfileSVG\n@profview f(args...)","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"where f(args...) is the operation you want to profile.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"For example:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"function profile_test(n)\n    for i = 1:n\n        A = randn(100,100,20)\n        m = maximum(A)\n        Am = mapslices(sum, A; dims=2)\n        B = A[:,:,5]\n        Bsort = mapslices(sort, B; dims=1)\n        b = rand(100)\n        C = B.*b\n    end\nend\n\nprofile_test(1)   # run once to compile\n\nusing Profile, ProfileSVG\nProfileSVG.init() # hide\n\n@profview profile_test(10)\nnothing # hide","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Then, you can get something like this:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"include(joinpath(\"assets\", \"profile_test.jl\")) # hide\nProfileSVG.view(backtraces, lidict=lidict) # hide","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Note that collected profiles can vary from run-to-run, so don't be alarmed if you get something different.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"@profview f(args...) is just shorthand for","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Profile.clear()\n@profile f(args...)\nProfileSVG.view()","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"If you've already collected profiling data with @profile, or if you want to customize the output, you can call ProfileSVG.view directly.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"info: Using ProfileSVG within VSCode\nVS Code with Julia Extension has a profile viewing feature. On the other hand, you can also display the SVG output of ProfileSVG in the Plot Pane in VS Code. Since @profview has a name collision with the Julia extension for VS Code, you need to explicitly specify ProfileSVG.@profview or use ProfileSVG.view.","category":"page"},{"location":"#Exporting-to-SVG-file","page":"Introduction","title":"Exporting to SVG file","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Even if you don't use graphical front-ends such as Jupyter, you might want to export a flame graph as an SVG file as a convenient way to share the results with others. The ProfileSVG.save function provides the exporting feature.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"using FlameGraphs # hide\nProfile.clear()\n@profile profile_test(10);\n\n# Save a graph that looks like the Jupyter example above\nProfileSVG.save(joinpath(\"assets\", \"prof.svg\"))\nProfileSVG.save(joinpath(\"assets\", \"prof.svg\"), flamegraph(backtraces, lidict=lidict)) # hide","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"(Image: Exported Profile) Note that the exported SVG files include the script for interactive features, but some viewers (browsers) do not support the script. In particular, when loading the SVG image from an HTML <img> element (as above), the interactive features are usually disabled.","category":"page"},{"location":"#Other-tools-for-displaying-profiles","page":"Introduction","title":"Other tools for displaying profiles","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"VS Code with Julia extension, a development environment, which supports profile visualization.\nPProf, a web-based profile GUI explorer, implemented as a wrapper around google/pprof.\nProfileView, a GUI based on Gtk.\nProfileVega, a Vega-Lite front-end, which supports exporting profiling data as a Vega-Lite figure.","category":"page"}]
}
